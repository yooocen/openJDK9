<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>HttpResponse.MultiProcessor (Java SE 9 &amp; JDK 9 [ad-hoc build])</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="keywords" content="jdk.incubator.http.HttpResponse.MultiProcessor interface">
<meta name="keywords" content="onRequest()">
<meta name="keywords" content="onResponse()">
<meta name="keywords" content="onError()">
<meta name="keywords" content="completion()">
<meta name="keywords" content="asMap()">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-1.10.2.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="HttpResponse.MultiProcessor (Java SE 9 & JDK 9 [ad-hoc build])";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":17,"i1":17,"i2":6,"i3":6,"i4":6,"i5":6};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav"><div style="padding: 6px; text-align: center; font-size: 80%; font-family: DejaVu Sans, Arial, Helvetica, sans-serif; font-weight: normal;">This specification is not final and is subject to change. Use is subject to <a href="http://www.oracle.com/technetwork/java/javase/terms/license/java9speclicense.html">license terms</a>.</div>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="../../../jdk.incubator.httpclient-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/HttpResponse.MultiProcessor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><div style="margin-top: 9px;"><strong>Java SE 9 &amp; JDK 9</strong> <br><strong>DRAFT 9-internal+0-adhoc.chenyongda.YourOpenJDK</strong></div></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../jdk/incubator/http/HttpResponse.BodyProcessor.html" title="interface in jdk.incubator.http"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../jdk/incubator/http/HttpTimeoutException.html" title="class in jdk.incubator.http"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?jdk/incubator/http/HttpResponse.MultiProcessor.html" target="_top">Frames</a></li>
<li><a href="HttpResponse.MultiProcessor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><span>SEARCH:&nbsp;</span>
<input type="text" id="search" value=" " disabled="disabled">
<input type="reset" id="reset" value=" " disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="moduleLabelInType">Module</span>&nbsp;<a href="../../../jdk.incubator.httpclient-summary.html">jdk.incubator.httpclient</a></div>
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="../../../jdk/incubator/http/package-summary.html">jdk.incubator.http</a></div>
<h2 title="Interface HttpResponse.MultiProcessor" class="title">Interface HttpResponse.MultiProcessor&lt;U,T&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>U</code> - a type representing the aggregated results</dd>
<dd><code>T</code> - a type representing all of the response bodies</dd>
</dl>
<dl>
<dt>Enclosing class:</dt>
<dd><a href="../../../jdk/incubator/http/HttpResponse.html" title="class in jdk.incubator.http">HttpResponse</a>&lt;<a href="../../../jdk/incubator/http/HttpResponse.html" title="type parameter in HttpResponse">T</a>&gt;</dd>
</dl>
<hr>
<br>
<pre>public static interface <span class="typeNameLabel">HttpResponse.MultiProcessor&lt;U,T&gt;</span></pre>
<div class="block">A response processor for a HTTP/2 multi response.
 <BR><b><a href="http://openjdk.java.net/jeps/11">Incubating Feature.</a> Will be removed in a future release.</b>
 <p>
 A multi response comprises a main response, and zero or more additional
 responses. Each additional response is sent by the server in response to
 requests that the server also generates. Additional responses are
 typically resources that the server expects the client will need which
 are related to the initial request.
 <p>
 Note. Instead of implementing this interface, applications should consider
 first using the mechanism (built on this interface) provided by
 <a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html#asMap-java.util.function.Function-boolean-"><code>MultiProcessor.asMap()</code></a> which is a slightly simplified, but
 general purpose interface.
 <p>
 The server generated requests are also known as <i>push promises</i>.
 The server is permitted to send any number of these requests up to the
 point where the main response is fully received. Therefore, after
 completion of the main response, the final number of additional
 responses is known. Additional responses may be canceled, but given that
 the server does not wait for any acknowledgment before sending the
 response, this must be done quickly to avoid unnecessary data transmission.

 <p> <code>MultiProcessor</code>s are parameterized with a type <code>U</code> which
 represents some meaningful aggregate of the responses received. This
 would typically be a collection of response or response body objects.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>9</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static &lt;V&gt;&nbsp;<a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html" title="interface in jdk.incubator.http">HttpResponse.MultiProcessor</a>&lt;<a href="../../../jdk/incubator/http/MultiMapResult.html" title="class in jdk.incubator.http">MultiMapResult</a>&lt;V&gt;,V&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html#asMap-java.util.function.Function-">asMap</a></span>&#8203;(<a href="../../../java/util/function/Function.html" title="interface in java.util.function">Function</a>&lt;<a href="../../../jdk/incubator/http/HttpRequest.html" title="class in jdk.incubator.http">HttpRequest</a>,<a href="../../../java/util/Optional.html" title="class in java.util">Optional</a>&lt;<a href="../../../jdk/incubator/http/HttpResponse.BodyHandler.html" title="interface in jdk.incubator.http">HttpResponse.BodyHandler</a>&lt;V&gt;&gt;&gt;&nbsp;pushHandler)</code></th>
<td class="colLast">
<div class="block">Returns a general purpose handler for multi responses.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static &lt;V&gt;&nbsp;<a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html" title="interface in jdk.incubator.http">HttpResponse.MultiProcessor</a>&lt;<a href="../../../jdk/incubator/http/MultiMapResult.html" title="class in jdk.incubator.http">MultiMapResult</a>&lt;V&gt;,V&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html#asMap-java.util.function.Function-boolean-">asMap</a></span>&#8203;(<a href="../../../java/util/function/Function.html" title="interface in java.util.function">Function</a>&lt;<a href="../../../jdk/incubator/http/HttpRequest.html" title="class in jdk.incubator.http">HttpRequest</a>,<a href="../../../java/util/Optional.html" title="class in java.util">Optional</a>&lt;<a href="../../../jdk/incubator/http/HttpResponse.BodyHandler.html" title="interface in jdk.incubator.http">HttpResponse.BodyHandler</a>&lt;V&gt;&gt;&gt;&nbsp;pushHandler,
     boolean&nbsp;completion)</code></th>
<td class="colLast">
<div class="block">Returns a general purpose handler for multi responses.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html" title="type parameter in HttpResponse.MultiProcessor">U</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html#completion-java.util.concurrent.CompletableFuture-java.util.concurrent.CompletableFuture-">completion</a></span>&#8203;(<a href="../../../java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../java/lang/Void.html" title="class in java.lang">Void</a>&gt;&nbsp;onComplete,
          <a href="../../../java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../java/lang/Void.html" title="class in java.lang">Void</a>&gt;&nbsp;onFinalPushPromise)</code></th>
<td class="colLast">
<div class="block">Returns a <a href="../../../java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent"><code>CompletableFuture</code></a><code>&lt;U&gt;</code>
 which completes when the aggregate result object itself is available.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html#onError-jdk.incubator.http.HttpRequest-java.lang.Throwable-">onError</a></span>&#8203;(<a href="../../../jdk/incubator/http/HttpRequest.html" title="class in jdk.incubator.http">HttpRequest</a>&nbsp;request,
       <a href="../../../java/lang/Throwable.html" title="class in java.lang">Throwable</a>&nbsp;t)</code></th>
<td class="colLast">
<div class="block">Called if an error occurs receiving a response.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../java/util/Optional.html" title="class in java.util">Optional</a>&lt;<a href="../../../jdk/incubator/http/HttpResponse.BodyHandler.html" title="interface in jdk.incubator.http">HttpResponse.BodyHandler</a>&lt;<a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html" title="type parameter in HttpResponse.MultiProcessor">T</a>&gt;&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html#onRequest-jdk.incubator.http.HttpRequest-">onRequest</a></span>&#8203;(<a href="../../../jdk/incubator/http/HttpRequest.html" title="class in jdk.incubator.http">HttpRequest</a>&nbsp;request)</code></th>
<td class="colLast">
<div class="block">Called for the main request and each push promise that is received.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html#onResponse-jdk.incubator.http.HttpResponse-">onResponse</a></span>&#8203;(<a href="../../../jdk/incubator/http/HttpResponse.html" title="class in jdk.incubator.http">HttpResponse</a>&lt;<a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html" title="type parameter in HttpResponse.MultiProcessor">T</a>&gt;&nbsp;response)</code></th>
<td class="colLast">
<div class="block">Called for each response received.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="onRequest-jdk.incubator.http.HttpRequest-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onRequest</h4>
<pre><a href="../../../java/util/Optional.html" title="class in java.util">Optional</a>&lt;<a href="../../../jdk/incubator/http/HttpResponse.BodyHandler.html" title="interface in jdk.incubator.http">HttpResponse.BodyHandler</a>&lt;<a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html" title="type parameter in HttpResponse.MultiProcessor">T</a>&gt;&gt;&nbsp;onRequest&#8203;(<a href="../../../jdk/incubator/http/HttpRequest.html" title="class in jdk.incubator.http">HttpRequest</a>&nbsp;request)</pre>
<div class="block">Called for the main request and each push promise that is received.
 The first call will always be for the main request that was sent
 by the caller. This <a href="../../../jdk/incubator/http/HttpRequest.html" title="class in jdk.incubator.http"><code>HttpRequest</code></a> parameter
 represents the initial request or subsequent PUSH_PROMISE. The
 implementation must return an <code>Optional</code> of <a href="../../../jdk/incubator/http/HttpResponse.BodyHandler.html" title="interface in jdk.incubator.http"><code>HttpResponse.BodyHandler</code></a> for
 the response body. Different handlers (of the same type) can be returned
 for different pushes within the same multi send. If no handler
 (an empty <code>Optional</code>) is returned, then the push will be canceled. It is
 an error to not return a valid <code>BodyHandler</code> for the initial (main) request.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - the main request or subsequent push promise</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an optional body handler</dd>
</dl>
</li>
</ul>
<a id="onResponse-jdk.incubator.http.HttpResponse-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onResponse</h4>
<pre>void&nbsp;onResponse&#8203;(<a href="../../../jdk/incubator/http/HttpResponse.html" title="class in jdk.incubator.http">HttpResponse</a>&lt;<a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html" title="type parameter in HttpResponse.MultiProcessor">T</a>&gt;&nbsp;response)</pre>
<div class="block">Called for each response received. For each request either one of
 onResponse() or onError() is guaranteed to be called, but not both.

 [Note] The reason for switching to this callback interface rather
 than using CompletableFutures supplied to onRequest() is that there
 is a subtle interaction between those CFs and the CF returned from
 completion() (or when onComplete() was called formerly). The completion()
 CF will not complete until after all of the work done by the onResponse()
 calls is done. Whereas if you just create CF's dependent on a supplied
 CF (to onRequest()) then the implementation has no visibility of the
 dependent CFs and can't guarantee to call onComplete() (or complete
 the completion() CF) after the dependent CFs complete.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>response</code> - the response received</dd>
</dl>
</li>
</ul>
<a id="onError-jdk.incubator.http.HttpRequest-java.lang.Throwable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onError</h4>
<pre>void&nbsp;onError&#8203;(<a href="../../../jdk/incubator/http/HttpRequest.html" title="class in jdk.incubator.http">HttpRequest</a>&nbsp;request,
             <a href="../../../java/lang/Throwable.html" title="class in java.lang">Throwable</a>&nbsp;t)</pre>
<div class="block">Called if an error occurs receiving a response. For each request
 either one of onResponse() or onError() is guaranteed to be called,
 but not both.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - the main request or subsequent push promise</dd>
<dd><code>t</code> - the Throwable that caused the error</dd>
</dl>
</li>
</ul>
<a id="completion-java.util.concurrent.CompletableFuture-java.util.concurrent.CompletableFuture-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>completion</h4>
<pre><a href="../../../java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html" title="type parameter in HttpResponse.MultiProcessor">U</a>&gt;&nbsp;completion&#8203;(<a href="../../../java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../java/lang/Void.html" title="class in java.lang">Void</a>&gt;&nbsp;onComplete,
                                <a href="../../../java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent">CompletableFuture</a>&lt;<a href="../../../java/lang/Void.html" title="class in java.lang">Void</a>&gt;&nbsp;onFinalPushPromise)</pre>
<div class="block">Returns a <a href="../../../java/util/concurrent/CompletableFuture.html" title="class in java.util.concurrent"><code>CompletableFuture</code></a><code>&lt;U&gt;</code>
 which completes when the aggregate result object itself is available.
 It is expected that the returned <code>CompletableFuture</code> will depend
 on one of the given <code>CompletableFuture&lt;Void</code>s which themselves complete
 after all individual responses associated with the multi response
 have completed, or after all push promises have been received.
 <p></div>
<dl>
<dt><span class="simpleTagLabel">Implementation Note:</span></dt>
<dd>Implementations might follow the pattern shown below
 <pre>
 <code>
      CompletableFuture&lt;U&gt; completion(
              CompletableFuture&lt;Void&gt; onComplete,
              CompletableFuture&lt;Void&gt; onFinalPushPromise)
      {
          return onComplete.thenApply((v) -&gt; {
              U u = ... instantiate and populate a U instance
              return u;
          });
      }
 </code>
 </pre>
 <p></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>onComplete</code> - a CompletableFuture which completes after all
 responses have been received relating to this multi request.</dd>
<dd><code>onFinalPushPromise</code> - CompletableFuture which completes after all
 push promises have been received.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the aggregate CF response object</dd>
</dl>
</li>
</ul>
<a id="asMap-java.util.function.Function-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asMap</h4>
<pre>static&nbsp;&lt;V&gt;&nbsp;<a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html" title="interface in jdk.incubator.http">HttpResponse.MultiProcessor</a>&lt;<a href="../../../jdk/incubator/http/MultiMapResult.html" title="class in jdk.incubator.http">MultiMapResult</a>&lt;V&gt;,V&gt;&nbsp;asMap&#8203;(<a href="../../../java/util/function/Function.html" title="interface in java.util.function">Function</a>&lt;<a href="../../../jdk/incubator/http/HttpRequest.html" title="class in jdk.incubator.http">HttpRequest</a>,<a href="../../../java/util/Optional.html" title="class in java.util">Optional</a>&lt;<a href="../../../jdk/incubator/http/HttpResponse.BodyHandler.html" title="interface in jdk.incubator.http">HttpResponse.BodyHandler</a>&lt;V&gt;&gt;&gt;&nbsp;pushHandler,
                                                                  boolean&nbsp;completion)</pre>
<div class="block">Returns a general purpose handler for multi responses. The aggregated
 result object produced by this handler is a
 <code>Map&lt;HttpRequest,CompletableFuture&lt;HttpResponse&lt;V&gt;&gt;&gt;</code>. Each
 request (both the original user generated request and each server
 generated push promise) is returned as a key of the map. The value
 corresponding to each key is a
 <code>CompletableFuture&lt;HttpResponse&lt;V&gt;&gt;</code>.
 <p>
 There are two ways to use these handlers, depending on the value of
 the <i>completion</I> parameter. If completion is true, then the
 aggregated result will be available after all responses have
 themselves completed. If <i>completion</i> is false, then the
 aggregated result will be available immediately after the last push
 promise was received. In the former case, this implies that all the
 CompletableFutures in the map values will have completed. In the
 latter case, they may or may not have completed yet.
 <p>
 The simplest way to use these handlers is to set completion to
 <code>true</code>, and then all (results) values in the Map will be
 accessible without blocking.
 <p>
 See <a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html#asMap-java.util.function.Function-boolean-"><code>asMap(java.util.function.Function, boolean)</code></a>
 for a code sample of using this interface.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>V</code> - the body type used for all responses</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pushHandler</code> - a function invoked for each request or push
 promise</dd>
<dd><code>completion</code> - <code>true</code> if the aggregate CompletableFuture
 completes after all responses have been received, or <code>false</code>
 after all push promises received.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a MultiProcessor</dd>
</dl>
</li>
</ul>
<a id="asMap-java.util.function.Function-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>asMap</h4>
<pre>static&nbsp;&lt;V&gt;&nbsp;<a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html" title="interface in jdk.incubator.http">HttpResponse.MultiProcessor</a>&lt;<a href="../../../jdk/incubator/http/MultiMapResult.html" title="class in jdk.incubator.http">MultiMapResult</a>&lt;V&gt;,V&gt;&nbsp;asMap&#8203;(<a href="../../../java/util/function/Function.html" title="interface in java.util.function">Function</a>&lt;<a href="../../../jdk/incubator/http/HttpRequest.html" title="class in jdk.incubator.http">HttpRequest</a>,<a href="../../../java/util/Optional.html" title="class in java.util">Optional</a>&lt;<a href="../../../jdk/incubator/http/HttpResponse.BodyHandler.html" title="interface in jdk.incubator.http">HttpResponse.BodyHandler</a>&lt;V&gt;&gt;&gt;&nbsp;pushHandler)</pre>
<div class="block">Returns a general purpose handler for multi responses. This is a
 convenience method which invokes <a href="../../../jdk/incubator/http/HttpResponse.MultiProcessor.html#asMap-java.util.function.Function-boolean-"><code>asMap(Function, true)</code></a> meaning that the aggregate result
 object completes after all responses have been received.
 <p>
 <b>Example usage:</b>
 <br>
 <pre>
 <code>
          HttpRequest request = HttpRequest.newBuilder()
                  .uri(URI.create("https://www.foo.com/"))
                  .GET()
                  .build();

          HttpClient client = HttpClient.newHttpClient();

          Map&lt;HttpRequest,CompletableFuture&lt;HttpResponse&lt;String&gt;&gt;&gt; results = client
              .sendAsync(request, MultiProcessor.asMap(
                  (req) -&gt; Optional.of(HttpResponse.BodyHandler.asString())))
              .join();
 </code></pre>
 <p>
 The lambda in this example is the simplest possible implementation,
 where neither the incoming requests are examined, nor the response
 headers, and every push that the server sends is accepted. When the
 join() call returns, all <code>HttpResponse</code>s and their associated
 body objects are available.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>V</code> - the body type used for all responses</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pushHandler</code> - a function invoked for each request or push
 promise</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a MultiProcessor</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="../../../jdk.incubator.httpclient-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/HttpResponse.MultiProcessor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><div style="margin-top: 9px;"><strong>Java SE 9 &amp; JDK 9</strong> <br><strong>DRAFT 9-internal+0-adhoc.chenyongda.YourOpenJDK</strong></div></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../jdk/incubator/http/HttpResponse.BodyProcessor.html" title="interface in jdk.incubator.http"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../jdk/incubator/http/HttpTimeoutException.html" title="class in jdk.incubator.http"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?jdk/incubator/http/HttpResponse.MultiProcessor.html" target="_top">Frames</a></li>
<li><a href="HttpResponse.MultiProcessor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><a href="http://bugreport.java.com/bugreport/">Report a bug or suggest an enhancement</a><br> For further API reference and developer documentation see the <a href="http://www.oracle.com/pls/topic/lookup?ctx=javase9&amp;id=homepage" target="_blank">Java SE Documentation</a>, which contains more detailed, developer-targeted descriptions with conceptual overviews, definitions of terms, workarounds, and working code examples.<br> Java is a trademark or registered trademark of Oracle and/or its affiliates in the US and other countries.<br> <a href="../../../../legal/copyright.html">Copyright</a> &copy; 1993, 2018, Oracle and/or its affiliates, 500 Oracle Parkway, Redwood Shores, CA 94065 USA.<br>All rights reserved. Use is subject to <a href="http://www.oracle.com/technetwork/java/javase/terms/license/java9speclicense.html">license terms</a> and the <a href="http://www.oracle.com/technetwork/java/redist-137594.html">documentation redistribution policy</a>. <br><strong>DRAFT 9-internal+0-adhoc.chenyongda.YourOpenJDK</strong> <!-- Version 9-internal+0-adhoc.chenyongda.YourOpenJDK --></small></p>
</footer>
</body>
</html>
